<!-- Dasbor Page -->
<div id="dashboard" class="page active">
    <div class="p-4">
        <div class="mb-4">
            <div class="grid grid-cols-2 gap-4 items-start">
                <div>
                    <h1 id="dashboardStoreName" class="text-2xl font-bold text-gray-800 truncate">Dasbor</h1>
                    <p id="dashboardStoreAddress" class="text-sm text-gray-500 truncate">Pengaturan toko belum diisi</p>
                </div>
                <div class="text-right">
                    <p id="dashboardDate" class="text-sm font-semibold text-gray-700"></p>
                    <div id="syncStatus" class="flex items-center justify-end gap-2 text-sm text-gray-500 cursor-pointer mt-1" onclick="syncWithServer(true)">
                        <i id="syncIcon" class="fas fa-sync-alt"></i>
                        <span id="syncText">Inisialisasi...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Cashier Button -->
        <div class="cashier-btn clickable" onclick="showPage('kasir')">
            <div class="cashier-btn-content">
                <div class="cashier-btn-icon">
                    <i class="fas fa-cash-register text-2xl"></i>
                </div>
                <div class="cashier-btn-text">
                    <h3>Kasir</h3>
                    <p>Buat transaksi baru</p>
                </div>
            </div>
            <div class="cashier-btn-arrow">
                <i class="fas fa-chevron-right"></i>
            </div>
        </div>

        <!-- Due Date Notifications -->
        <div id="dueDateNotificationCard" class="card p-4 mb-6 bg-yellow-50 border-yellow-300 hidden clickable">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <i class="fas fa-exclamation-circle text-yellow-500 text-3xl mr-4"></i>
                    <div>
                        <h3 class="font-bold text-yellow-800">Pengingat Jatuh Tempo</h3>
                        <p class="text-sm text-yellow-700"><span id="dueDateCount">0</span> item akan/sudah jatuh tempo.</p>
                    </div>
                </div>
                <i class="fas fa-chevron-right text-yellow-600"></i>
            </div>
        </div>
        
        <!-- Stats Cards -->
        <div class="grid grid-cols-2 gap-4 mb-6">
            <div class="card p-4">
                <div class="flex items-center justify-between mb-2">
                    <i class="fas fa-shopping-cart text-blue-500 text-2xl"></i>
                    <span class="text-xs text-gray-500">Hari Ini</span>
                </div>
                <h3 class="text-2xl font-bold" id="todaySales">Rp 0</h3>
                <p class="text-sm text-gray-600">Penjualan</p>
            </div>
            
            <div class="card p-4">
                 <div class="flex items-center justify-between mb-2">
                    <i class="fas fa-receipt text-purple-500 text-2xl"></i>
                    <span class="text-xs text-gray-500">Hari Ini</span>
                </div>
                <h3 class="text-2xl font-bold" id="todayTransactions">0</h3>
                <p class="text-sm text-gray-600">Transaksi</p>
            </div>
            
            <div class="card p-4">
                <div class="flex items-center justify-between mb-2">
                    <i class="fas fa-box text-green-500 text-2xl"></i>
                    <span class="text-xs text-gray-500">Total</span>
                </div>
                <h3 class="text-2xl font-bold" id="totalProducts">0</h3>
                <p class="text-sm text-gray-600">Produk</p>
            </div>
            
            <div class="card p-4 clickable" onclick="showPage('produk')">
                <div class="flex items-center justify-between mb-2">
                    <i class="fas fa-exclamation-triangle text-yellow-500 text-2xl"></i>
                    <span class="text-xs text-gray-500">Segera Habis</span>
                </div>
                <h3 class="text-2xl font-bold" id="lowStockProducts">0</h3>
                <p class="text-sm text-gray-600">Produk Stok Rendah</p>
            </div>
            
            <div class="card p-4 col-span-2">
                <div class="flex items-center justify-between mb-2">
                    <i class="fas fa-chart-line text-orange-500 text-2xl"></i>
                    <span class="text-xs text-gray-500">Bulan Ini</span>
                </div>
                <h3 class="text-2xl font-bold" id="monthSales">Rp 0</h3>
                <p class="text-sm text-gray-600">Total Penjualan</p>
            </div>
        </div>

        <!-- Sales Chart -->
        <div id="salesChartCard" class="card p-4 mb-6" style="display: none;">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-lg font-semibold">Grafik Penjualan</h2>
                <div id="chartViewToggle" class="relative bg-gray-200 p-1 rounded-full flex items-center w-40">
                    <span id="chartViewGlider" class="absolute bg-white shadow rounded-full h-full w-1/2 transition-transform duration-300 ease-in-out"></span>
                    <button id="dailyViewBtn" class="relative z-10 w-1/2 py-1.5 text-sm font-semibold text-gray-800 rounded-full focus:outline-none">Harian</button>
                    <button id="weeklyViewBtn" class="relative z-10 w-1/2 py-1.5 text-sm font-semibold text-gray-500 rounded-full focus:outline-none">Mingguan</button>
                </div>
            </div>
            <div class="relative h-64">
                <canvas id="salesChart"></canvas>
            </div>
        </div>
        
        <!-- Receivables and Debts Summary -->
        <div class="grid grid-cols-2 gap-4">
            <div id="receivablesSummaryCard" class="card p-4 clickable" onclick="showPage('kontak', { initialTab: 'customer' })">
                <div class="flex items-center justify-between mb-2">
                    <i class="fas fa-hand-holding-usd text-teal-500 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold" id="totalReceivables">Rp 0</h3>
                <p class="text-sm text-gray-600">Total Piutang</p>
            </div>
            <div id="debtsSummaryCard" class="card p-4 clickable" onclick="showPage('kontak', { initialTab: 'supplier' })">
                <div class="flex items-center justify-between mb-2">
                    <i class="fas fa-file-invoice-dollar text-red-500 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold" id="totalDebts">Rp 0</h3>
                <p class="text-sm text-gray-600">Total Hutang</p>
            </div>
        </div>

    </div>
</div>

<!-- Kasir Page -->
<div id="kasir" class="page">
    <div class="p-4 pb-24">
        <div class="flex justify-between items-center mb-4">
            <h1 class="text-2xl font-bold">Kasir</h1>
            <button id="cashierLogoutBtn" onclick="lockScreen()" class="hidden btn bg-yellow-500 text-white px-3 py-1.5 text-sm">
                <i class="fas fa-lock"></i> Kunci
            </button>
        </div>
        
        <!-- Search Bar & Scan Button -->
        <div class="flex gap-2 mb-4">
            <input type="text" id="searchProduct" placeholder="Cari produk atau scan barcode..." class="input-field w-full">
            <button id="scanBarcodeBtn" onclick="showScanModal()" class="btn bg-gray-600 text-white px-4 flex-shrink-0">
                <i class="fas fa-barcode"></i>
            </button>
        </div>
        
        <!-- Products Grid -->
        <div class="grid grid-cols-3 gap-3 mb-4" id="productsGrid">
            <!-- Products will be loaded here -->
        </div>
    </div>
    
     <!-- Cart Modal -->
    <div id="cartModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-40">
        <div id="cartBackdrop" class="absolute inset-0" onclick="hideCartModal()"></div>
        <div id="cartSection" class="fixed bottom-0 left-0 right-0 bg-white shadow-lg rounded-t-2xl p-4 max-h-[80vh] overflow-y-auto transform translate-y-full transition-transform duration-300 ease-in-out">
            <div class="flex justify-between items-center mb-3 pb-3 border-b">
                <h2 class="text-lg font-semibold">Keranjang</h2>
                <div class="flex items-center gap-4">
                    <button onclick="clearCart()" class="text-red-500 text-sm clickable">
                        <i class="fas fa-trash"></i> Kosongkan
                    </button>
                    <button onclick="hideCartModal()" class="text-gray-500 text-2xl clickable">&times;</button>
                </div>
            </div>
            
            <div id="cartItems" class="space-y-2 mb-4">
                <p class="text-gray-500 text-center py-4">Keranjang kosong</p>
            </div>
            
            <div class="border-t pt-3">
                <div class="space-y-1 mb-2">
                    <div class="flex justify-between text-sm">
                        <span>Subtotal:</span>
                        <span id="cartSubtotal">Rp 0</span>
                    </div>
                    <div id="cartFees" class="space-y-1 text-sm border-t mt-2 pt-2">
                        <!-- Applied fees will be shown here -->
                    </div>
                    <div class="flex justify-between border-t pt-1 mt-1">
                        <span class="font-semibold">Total:</span>
                        <span class="text-xl font-bold" id="cartTotal">Rp 0</span>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <button onclick="showFeeSelectionModal()" class="btn bg-gray-200 text-gray-700 w-full py-2 text-sm">
                        <i class="fas fa-tags"></i> Pajak/Biaya
                    </button>
                     <button onclick="showPreviewReceiptModal()" class="btn bg-gray-200 text-gray-700 w-full py-2 text-sm">
                        <i class="fas fa-eye"></i> Preview Struk
                    </button>
                </div>
                <button onclick="showPaymentModal()" class="btn bg-blue-500 text-white w-full py-3 font-semibold">
                    <i class="fas fa-credit-card"></i> Bayar
                </button>
            </div>
        </div>
    </div>

    <!-- Cart Floating Action Button -->
    <div id="cartFab" onclick="showCartModal()" class="cart-fab clickable hidden">
        <i class="fas fa-shopping-cart text-2xl"></i>
        <span id="cartBadge" class="cart-badge hidden">0</span>
    </div>
</div>

<!-- Produk Page -->
<div id="produk" class="page">
    <div class="p-4">
        <div class="flex justify-between items-center mb-4">
            <h1 class="text-2xl font-bold">Produk</h1>
            <div class="flex gap-2">
                 <button onclick="showManageCategoryModal()" class="btn bg-gray-600 text-white px-4 py-2">
                    <i class="fas fa-tags"></i> Kategori
                </button>
                <button onclick="showAddProductModal()" class="btn bg-blue-500 text-white px-4 py-2">
                    <i class="fas fa-plus"></i> Tambah
                </button>
            </div>
        </div>

        <!-- Category Filter -->
        <div class="mb-4">
            <select id="productCategoryFilter" onchange="loadProductsList()" class="input-field w-full">
                <!-- Categories populated by JS -->
            </select>
        </div>
        
        <!-- Products List -->
        <div id="productsList" class="space-y-3">
            <!-- Products will be loaded here -->
        </div>
    </div>
</div>

<!-- Kontak Page (New) -->
<div id="kontak" class="page">
    <div class="p-4">
        <div class="flex justify-between items-center mb-4">
            <h1 class="text-2xl font-bold">Kontak</h1>
            <button onclick="showContactModal()" class="btn bg-blue-500 text-white px-4 py-2">
                <i class="fas fa-plus"></i> Tambah
            </button>
        </div>

        <!-- Tabs for Pelanggan/Supplier -->
        <div class="flex border-b mb-4">
            <button id="customerTab" class="tab-item active" onclick="switchContactTab('customer')">Pelanggan</button>
            <button id="supplierTab" class="tab-item" onclick="switchContactTab('supplier')">Supplier</button>
        </div>
        
        <div id="customerListContainer">
            <div id="customerList" class="space-y-3">
                <!-- Customer list rendered here -->
            </div>
        </div>
        
        <div id="supplierListContainer" class="hidden">
            <div id="supplierList" class="space-y-3">
                <!-- Supplier list rendered here -->
            </div>
        </div>
    </div>
</div>

<!-- Laporan Page -->
<div id="laporan" class="page pb-24">
    <div class="p-4">
        <h1 class="text-2xl font-bold mb-4">Laporan</h1>
        
        <!-- View for Admin/Manager -->
        <div id="adminReportView">
            <!-- Date Range -->
            <div class="card p-4 mb-4">
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="text-sm text-gray-600">Dari</label>
                        <input type="date" id="dateFrom" class="input-field w-full">
                    </div>
                    <div>
                        <label class="text-sm text-gray-600">Sampai</label>
                        <input type="date" id="dateTo" class="input-field w-full">
                    </div>
                </div>
                <button onclick="generateReport()" class="btn bg-blue-500 text-white w-full mt-3 py-2">
                    <i class="fas fa-chart-bar"></i> Generate Laporan
                </button>
            </div>
            
            <!-- Report Summary -->
            <div id="reportSummary" class="card p-4 mb-4" style="display: none;">
                <h2 class="text-lg font-semibold mb-3">Ringkasan Laporan</h2>
                <div class="space-y-2 text-sm">
                    <!-- Omzet -->
                    <div class="flex justify-between items-center border-b pb-2">
                        <span class="font-semibold text-gray-800">Total Omzet (Penjualan Kotor):</span>
                        <span class="font-bold text-lg text-blue-600" id="reportOmzet">Rp 0</span>
                    </div>
                    <!-- HPP -->
                    <div class="flex justify-between items-center pt-1">
                        <span class="text-gray-600">(-) Harga Pokok Penjualan (HPP):</span>
                        <span class="font-semibold text-red-500" id="reportHpp">Rp 0</span>
                    </div>
                    <!-- Laba Kotor -->
                    <div class="flex justify-between items-center border-b pb-2">
                        <span class="font-semibold text-gray-800">Laba Kotor:</span>
                        <span class="font-bold text-green-600" id="reportGrossProfit">Rp 0</span>
                    </div>
                    <!-- Biaya Operasional -->
                    <div class="flex justify-between items-center pt-1">
                        <span class="text-gray-600">(-) Total Biaya Operasional:</span>
                        <span class="font-semibold text-red-500" id="reportOperationalCost">Rp 0</span>
                    </div>
                    <!-- Laba Bersih -->
                    <div class="flex justify-between items-center border-b pb-2">
                        <span class="font-semibold text-gray-800">Laba Bersih:</span>
                        <span class="font-bold text-xl text-green-700" id="reportNetProfit">Rp 0</span>
                    </div>
                    <!-- Arus Kas -->
                    <div class="flex justify-between items-center pt-2">
                        <span class="font-semibold text-gray-800">Arus Kas dari Penjualan:</span>
                        <span class="font-bold text-blue-600" id="reportCashFlow">Rp 0</span>
                    </div>
                    <div class="border-t pt-2 mt-2"></div>
                    <!-- Info Tambahan -->
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Total Transaksi:</span>
                        <span class="font-semibold" id="reportTotalTransactions">0</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Rata-rata Omzet / Transaksi:</span>
                        <span class="font-semibold" id="reportAverage">Rp 0</span>
                    </div>
                </div>
                <button onclick="exportReportToCSV()" class="btn bg-green-500 text-white w-full mt-4 py-2">
                    <i class="fas fa-file-excel"></i> Export ke Excel (.csv)
                </button>
            </div>

            <!-- Produk Terlaris -->
            <div id="topSellingProductsCard" class="card p-4 mb-4" style="display: none;">
                <h2 class="text-lg font-semibold mb-3">Produk Terlaris</h2>
                <div id="topSellingProductsList" class="space-y-2">
                    <!-- Top products will be loaded here -->
                </div>
            </div>

            <!-- Report Details -->
            <div id="reportDetails" class="card p-4" style="display: none;">
                <h2 class="text-lg font-semibold mb-3">Detail Transaksi</h2>
                <div id="reportTransactions" class="space-y-2">
                    <!-- Report transactions will be loaded here -->
                </div>
            </div>

            <!-- AI Analysis Card -->
            <div id="aiAnalysisCard" class="card p-4 mt-4" style="display: none;">
                <h2 class="text-lg font-semibold mb-3">Analisa & Saran Penjualan (AI)</h2>
                <div class="space-y-3">
                    <button id="analyzeBtn" onclick="analyzeWithAI()" class="btn bg-purple-600 text-white w-full py-2">
                        <i class="fas fa-magic"></i> Analisa dengan AI
                    </button>
                    <div id="aiAnalysisLoading" style="display: none;" class="flex flex-col items-center justify-center p-4">
                        <div class="spinner"></div>
                        <p class="mt-2 text-gray-600">AI sedang menganalisa data...</p>
                    </div>
                    <div id="aiAnalysisResult" class="mt-2">
                        <!-- AI result will be shown here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- View for Cashier -->
        <div id="cashierReportView" class="hidden">
            <div class="card p-4 mb-4 text-center">
                <h2 class="text-lg font-semibold mb-3">Laporan Kasir Harian</h2>
                <p class="text-sm text-gray-600 mb-4">Buat ringkasan penjualan Anda untuk hari ini.</p>
                <button onclick="generateCashierReport()" class="btn bg-blue-500 text-white w-full py-3">
                    <i class="fas fa-file-invoice-dollar mr-2"></i> Buat Laporan Tutup Kasir
                </button>
            </div>
        </div>

    </div>
</div>

<!-- Pengaturan Page -->
<div id="pengaturan" class="page">
    <div class="p-4">
        <h1 class="text-2xl font-bold mb-4">Pengaturan</h1>
        
        <!-- Store Settings -->
        <div class="card p-4 mb-4">
            <h2 class="text-lg font-semibold mb-3">Informasi & Struk</h2>
            <div class="space-y-3">
                <div>
                    <label class="text-sm text-gray-600">Logo Toko (Opsional)</label>
                    <div class="image-upload-container clickable" onclick="document.getElementById('storeLogo').click()">
                        <input type="file" id="storeLogo" accept="image/*" class="hidden" onchange="previewStoreLogo(event)">
                        <div id="storeLogoPreview" class="upload-placeholder">
                            <i class="fas fa-image text-3xl mb-2"></i>
                            <p>Tap untuk upload logo</p>
                        </div>
                    </div>
                     <div class="flex items-center mt-2">
                        <input type="checkbox" id="showLogoOnReceipt" class="h-4 w-4 rounded text-blue-600 border-gray-300 focus:ring-blue-500">
                        <label for="showLogoOnReceipt" class="ml-2 text-sm text-gray-600">Tampilkan logo di struk</label>
                    </div>
                </div>
                 <div>
                    <label for="storeName" class="text-sm text-gray-600">Nama Toko</label>
                    <input type="text" id="storeName" class="input-field w-full" placeholder="Nama Toko Anda">
                </div>
                <div>
                    <label for="storeAddress" class="text-sm text-gray-600">Alamat Toko</label>
                    <textarea id="storeAddress" class="input-field w-full" rows="2" placeholder="Alamat lengkap toko"></textarea>
                </div>
                 <div>
                    <label for="storeFeedbackPhone" class="text-sm text-gray-600">No. Kritik & Saran</label>
                    <input type="tel" id="storeFeedbackPhone" class="input-field w-full" placeholder="08123456789 (opsional)">
                </div>
                 <div>
                    <label for="storeFooterText" class="text-sm text-gray-600">Teks Footer Struk</label>
                    <input type="text" id="storeFooterText" class="input-field w-full" placeholder="Terima kasih telah berbelanja!">
                </div>
            </div>
        </div>

        <!-- Product & Printer Settings -->
        <div class="card p-4 mb-4">
            <h2 class="text-lg font-semibold mb-3">Produk & Printer</h2>
            <div class="space-y-3">
                 <div>
                    <label for="lowStockThreshold" class="text-sm text-gray-600">Ambang Batas Stok Rendah</label>
                    <input type="number" id="lowStockThreshold" class="input-field w-full" placeholder="5">
                </div>
                 <div>
                    <label for="printerPaperSize" class="text-sm text-gray-600">Ukuran Kertas Printer</label>
                    <select id="printerPaperSize" class="input-field w-full">
                        <option value="80mm">80mm</option>
                        <option value="58mm">58mm</option>
                    </select>
                </div>
                 <div id="autoPrintContainer" class="flex items-center">
                    <input type="checkbox" id="autoPrintReceipt" class="h-4 w-4 rounded text-blue-600 border-gray-300 focus:ring-blue-500">
                    <label for="autoPrintReceipt" class="ml-2 text-sm text-gray-600">Cetak struk otomatis setelah transaksi</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="autoOpenCashDrawer" class="h-4 w-4 rounded text-blue-600 border-gray-300 focus:ring-blue-500">
                    <label for="autoOpenCashDrawer" class="ml-2 text-sm text-gray-600">Buka laci kasir otomatis saat cetak</label>
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <button id="testPrintBtn" onclick="testPrint()" class="btn bg-gray-200 text-gray-700 w-full py-2 text-sm">
                        <i class="fas fa-print"></i> Test Cetak
                    </button>
                    <button onclick="showPrintHelpModal()" class="btn bg-gray-200 text-gray-700 w-full py-2 text-sm">
                        <i class="fas fa-question-circle"></i> Bantuan Cetak
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Tax & Fee Settings -->
        <div class="card p-4 mb-4">
            <h2 class="text-lg font-semibold mb-3">Pajak & Biaya Tambahan</h2>
             <div class="space-y-3 mb-4">
                <div>
                    <label class="text-sm text-gray-600">Daftar Biaya</label>
                    <div id="feesList" class="space-y-2 max-h-48 overflow-y-auto border p-2 rounded-lg bg-gray-50">
                        <!-- Fees loaded here -->
                    </div>
                </div>
                <div>
                    <label class="text-sm text-gray-600">Tambah Biaya Baru</label>
                    <div class="p-3 bg-gray-50 rounded-lg space-y-2">
                        <input type="text" id="feeName" class="input-field w-full" placeholder="Nama Biaya (e.g., PPN, Biaya Layanan)">
                        <div class="grid grid-cols-2 gap-2">
                            <select id="feeType" class="input-field w-full">
                                <option value="percentage">Persentase (%)</option>
                                <option value="fixed">Tetap (Rp)</option>
                            </select>
                            <input type="number" id="feeValue" class="input-field w-full" placeholder="Nilai">
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="feeIsDefault" class="h-4 w-4 rounded text-blue-600 border-gray-300 focus:ring-blue-500">
                            <label for="feeIsDefault" class="ml-2 text-sm text-gray-600">Terapkan otomatis ke semua transaksi</label>
                        </div>
                         <button onclick="addFee()" class="btn bg-blue-500 text-white w-full py-2 mt-2">Tambah Biaya</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Data Management -->
        <div id="dataManagementCard" class="card p-4 mb-4">
            <h2 class="text-lg font-semibold mb-3">Manajemen Data</h2>
            <div class="grid grid-cols-2 gap-2">
                 <button onclick="showImportProductsModal()" class="btn bg-gray-200 text-gray-700 w-full py-2 text-sm">
                    <i class="fas fa-file-csv"></i> Import Produk
                </button>
                <button onclick="importData()" class="btn bg-gray-200 text-gray-700 w-full py-2 text-sm">
                    <i class="fas fa-upload"></i> Import Semua
                </button>
                <button onclick="exportData()" class="btn bg-gray-200 text-gray-700 w-full py-2 text-sm">
                    <i class="fas fa-download"></i> Export Semua
                </button>
                 <button id="clearDataBtn" onclick="clearAllData()" class="btn bg-red-100 text-red-700 w-full py-2 text-sm">
                    <i class="fas fa-trash-alt"></i> Hapus Data
                </button>
            </div>
            <input type="file" id="importFile" class="hidden" accept=".json" onchange="handleImport(event)">
        </div>

        <!-- Gemini AI Config -->
        <div class="card p-4 mb-4">
            <h2 class="text-lg font-semibold mb-3">Konfigurasi AI Gemini</h2>
            <div class="space-y-3">
                <div>
                    <label for="aiModelName" class="text-sm text-gray-600">Model AI</label>
                    <input type="text" id="aiModelName" class="input-field w-full" placeholder="e.g., gemini-2.5-pro">
                </div>
                <div>
                    <label class="text-sm text-gray-600">API Key</label>
                    <div class="flex items-center gap-2">
                        <span id="apiKeyStatus" class="flex-grow text-sm p-3 bg-gray-100 rounded-lg">Memeriksa...</span>
                        <button onclick="selectApiKey()" class="btn bg-blue-500 text-white px-4 py-2 flex-shrink-0">
                            Pilih Key
                        </button>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">API Key Anda dipilih dan digunakan secara aman melalui dialog Google. Info <a href="https://ai.google.dev/gemini-api/docs/billing" target="_blank" class="text-blue-500 underline">billing</a>.</p>
                </div>
            </div>
        </div>

        <!-- User Management -->
        <div id="userManagementCard" class="card p-4 mb-4">
            <h2 class="text-lg font-semibold mb-3">Manajemen Pengguna</h2>
            <button onclick="showManageUsersModal()" class="btn bg-gray-200 text-gray-700 w-full py-2">Kelola Akun Kasir & Manajer</button>
        </div>
        
        <!-- Session & Account -->
        <div id="sessionManagementCard" class="card p-4 mb-4">
            <h2 class="text-lg font-semibold mb-3">Sesi & Akun</h2>
            <div class="space-y-2">
                <button onclick="lockScreen()" class="btn bg-yellow-500 text-white w-full py-2">Kunci Layar</button>
                <button id="fullLogoutBtn" onclick="logout()" class="btn bg-red-500 text-white w-full py-2">Logout dari Perangkat</button>
            </div>
        </div>

        <button onclick="saveStoreSettings()" class="btn bg-blue-500 text-white w-full py-3 mt-4">Simpan Pengaturan</button>

    </div>
</div>